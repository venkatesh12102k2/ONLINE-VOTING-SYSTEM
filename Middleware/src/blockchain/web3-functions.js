const { web3, fetchDeployerAccount } = require("../../utils/web3");

const addAccount = async (password) => {
	//const account = await web3.eth.personal.newAccount(password);
	const account = await web3.eth.personal.newAccount("");
	const deployerAccount = await fetchDeployerAccount();
	console.log("test 10");
	await unlockAccount(deployerAccount, process.env.ACCOUNT_PASSWORD);
	console.log("test 12",deployerAccount,account);

	await web3.eth.sendTransaction(
		{
			from: deployerAccount+'',
			to: account+'',
			gas: "3000000",
			value: "1000000000000000000",
			data:"608060405234801561001057600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555066b1a2bc2ec50000600581905550670b1a2bc2ec5000006006819055506000600a60006101000a81548160ff021916908315150217905550611982806100986000396000f3fe6080604052600436106100f35760003560e01c80635f74bbde1161008a578063b96ee0dc11610059578063b96ee0dc146102c8578063f09d50be14610305578063f396d67414610330578063fab2f86b1461035b576100f3565b80635f74bbde1461024e578063786686581461026a5780638f473b5a14610281578063a5ea5627146102be576100f3565b806325709fa6116100c657806325709fa6146101905780633fe46043146101bb578063451891a6146101e65780635f49cf9c14610211576100f3565b806306a49fce146100f857806318108d08146101235780631bdbb2ab1461014e5780631ec6b60a14610179575b600080fd5b34801561010457600080fd5b5061010d610372565b60405161011a91906111c3565b60405180910390f35b34801561012f57600080fd5b506101386104bf565b60405161014591906111f4565b60405180910390f35b34801561015a57600080fd5b506101636104c5565b604051610170919061121e565b60405180910390f35b34801561018557600080fd5b5061018e6104e9565b005b34801561019c57600080fd5b506101a5610594565b6040516101b29190611254565b60405180910390f35b3480156101c757600080fd5b506101d06105a7565b6040516101dd91906111f4565b60405180910390f35b3480156101f257600080fd5b506101fb6105ad565b60405161020891906111f4565b60405180910390f35b34801561021d57600080fd5b50610238600480360381019061023391906112a0565b6105b3565b6040516102459190611254565b60405180910390f35b610268600480360381019061026391906112f9565b6105d3565b005b34801561027657600080fd5b5061027f610a53565b005b34801561028d57600080fd5b506102a860048036038101906102a391906112a0565b610ba1565b6040516102b59190611254565b60405180910390f35b6102c6610bc1565b005b3480156102d457600080fd5b506102ef60048036038101906102ea91906112a0565b610e2a565b6040516102fc9190611254565b60405180910390f35b34801561031157600080fd5b5061031a610e4a565b60405161032791906111f4565b60405180910390f35b34801561033c57600080fd5b50610345610e50565b60405161035291906111f4565b60405180910390f35b34801561036757600080fd5b50610370610e56565b005b60606003805480602002602001604051908101604052809291908181526020016000905b828210156104b657838290600052602060002090600302016040518060600160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016001820180548060200260200160405190810160405280929190818152602001828054801561049457602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001906001019080831161044a575b5050505050815260200160028201548152505081526020019060010190610396565b50505050905090565b60055481565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610577576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161056e90611396565b60405180910390fd5b6001600a60006101000a81548160ff021916908315150217905550565b600a60009054906101000a900460ff1681565b60075481565b60095481565b60026020528060005260406000206000915054906101000a900460ff1681565b600a60009054906101000a900460ff16610622576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161061990611402565b60405180910390fd5b60003373ffffffffffffffffffffffffffffffffffffffff16310361067c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106739061146e565b60405180910390fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16610708576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106ff906114da565b60405180910390fd5b600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c90611546565b60405180910390fd5b670b1a2bc2ec50000034146107df576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107d6906115b2565b60405180910390fd5b600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1661086b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108629061161e565b60405180910390fd5b8173ffffffffffffffffffffffffffffffffffffffff16600382815481106108965761089561163e565b5b906000526020600020906003020160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461091e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610915906116df565b60405180910390fd5b600381815481106109325761093161163e565b5b906000526020600020906003020160020160008154809291906109549061172e565b91905055506003818154811061096d5761096c61163e565b5b9060005260206000209060030201600101339080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600860008154809291906109f29061172e565b91905055506001600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055505050565b600a60009054906101000a900460ff1615610aa3576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a9a906117e8565b60405180910390fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615610b30576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b2790611854565b60405180910390fd5b60076000815480929190610b439061172e565b919050555060018060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550565b60046020528060005260406000206000915054906101000a900460ff1681565b600a60009054906101000a900460ff1615610c11576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c08906117e8565b60405180910390fd5b6005543414610c55576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c4c906118c0565b60405180910390fd5b600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615610ce2576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cd99061192c565b60405180910390fd5b6060600060405180606001604052803373ffffffffffffffffffffffffffffffffffffffff1681526020018381526020016000815250905060096000815480929190610d2d9061172e565b9190505550600381908060018154018082558091505060019003906000526020600020906003020160009091909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019080519060200190610dc1929190610f01565b506040820151816002015550506001600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055505050565b60016020528060005260406000206000915054906101000a900460ff1681565b60065481565b60085481565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610ee4576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610edb90611396565b60405180910390fd5b6000600a60006101000a81548160ff021916908315150217905550565b828054828255906000526020600020908101928215610f7a579160200282015b82811115610f795782518260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555091602001919060010190610f21565b5b509050610f879190610f8b565b5090565b5b80821115610fa4576000816000905550600101610f8c565b5090565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610fff82610fd4565b9050919050565b61100f81610ff4565b82525050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600061104d8383611006565b60208301905092915050565b6000602082019050919050565b600061107182611015565b61107b8185611020565b935061108683611031565b8060005b838110156110b757815161109e8882611041565b97506110a983611059565b92505060018101905061108a565b5085935050505092915050565b6000819050919050565b6110d7816110c4565b82525050565b60006060830160008301516110f56000860182611006565b506020830151848203602086015261110d8282611066565b915050604083015161112260408601826110ce565b508091505092915050565b600061113983836110dd565b905092915050565b6000602082019050919050565b600061115982610fa8565b6111638185610fb3565b93508360208202850161117585610fc4565b8060005b858110156111b15784840389528151611192858261112d565b945061119d83611141565b925060208a01995050600181019050611179565b50829750879550505050505092915050565b600060208201905081810360008301526111dd818461114e565b905092915050565b6111ee816110c4565b82525050565b600060208201905061120960008301846111e5565b92915050565b61121881610ff4565b82525050565b6000602082019050611233600083018461120f565b92915050565b60008115159050919050565b61124e81611239565b82525050565b60006020820190506112696000830184611245565b92915050565b600080fd5b61127d81610ff4565b811461128857600080fd5b50565b60008135905061129a81611274565b92915050565b6000602082840312156112b6576112b561126f565b5b60006112c48482850161128b565b91505092915050565b6112d6816110c4565b81146112e157600080fd5b50565b6000813590506112f3816112cd565b92915050565b600080604083850312156113105761130f61126f565b5b600061131e8582860161128b565b925050602061132f858286016112e4565b9150509250929050565b600082825260208201905092915050565b7f556e617574686f72697a65640000000000000000000000000000000000000000600082015250565b6000611380600c83611339565b915061138b8261134a565b602082019050919050565b600060208201905081810360008301526113af81611373565b9050919050565b7f566f74696e672069736e27742073746172746564207965740000000000000000600082015250565b60006113ec601883611339565b91506113f7826113b6565b602082019050919050565b6000602082019050818103600083015261141b816113df565b9050919050565b7f496e73756666696369656e742042616c616e6365000000000000000000000000600082015250565b6000611458601483611339565b915061146382611422565b602082019050919050565b600060208201905081810360008301526114878161144b565b9050919050565b7f4e6f74206120566f746572000000000000000000000000000000000000000000600082015250565b60006114c4600b83611339565b91506114cf8261148e565b602082019050919050565b600060208201905081810360008301526114f3816114b7565b9050919050565b7f416c726561647920566f74656400000000000000000000000000000000000000600082015250565b6000611530600d83611339565b915061153b826114fa565b602082019050919050565b6000602082019050818103600083015261155f81611523565b9050919050565b7f496e73756666696369656e742042616c616e636520746f20566f746500000000600082015250565b600061159c601c83611339565b91506115a782611566565b602082019050919050565b600060208201905081810360008301526115cb8161158f565b9050919050565b7f4e6f7420612056616c69642043616e64696461746520476976656e0000000000600082015250565b6000611608601b83611339565b9150611613826115d2565b602082019050919050565b60006020820190508181036000830152611637816115fb565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f43616e64696461746527732061646472657373202620696e64657820646f6e2760008201527f74206d6174636800000000000000000000000000000000000000000000000000602082015250565b60006116c9602783611339565b91506116d48261166d565b604082019050919050565b600060208201905081810360008301526116f8816116bc565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000611739826110c4565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361176b5761176a6116ff565b5b600182019050919050565b7f566f74696e6720616c72656164792073746172746564212043616e277420726560008201527f6769737465720000000000000000000000000000000000000000000000000000602082015250565b60006117d2602683611339565b91506117dd82611776565b604082019050919050565b60006020820190508181036000830152611801816117c5565b9050919050565b7f416c7265616479205265676973746572656420566f7465722100000000000000600082015250565b600061183e601983611339565b915061184982611808565b602082019050919050565b6000602082019050818103600083015261186d81611831565b9050919050565b7f57726f6e6720466565732050726f766964656421000000000000000000000000600082015250565b60006118aa601483611339565b91506118b582611874565b602082019050919050565b600060208201905081810360008301526118d98161189d565b9050919050565b7f416c726561647920612043616e64696461746500000000000000000000000000600082015250565b6000611916601383611339565b9150611921826118e0565b602082019050919050565b6000602082019050818103600083015261194581611909565b905091905056fea2646970667358221220f8c5d63bae4e7c922a56281aa26b206836310e96a3225d09adfdbf68e099d24464736f6c63430008120033",
		},
		process.env.ACCOUNT_PASSWORD
	);
	console.log("test 11");
	return account;
};

const unlockAccount = async (address, password) => {
	// await web3.eth.personal.unlockAccount(address, password, 36000);
	await web3.eth.personal.unlockAccount(address, "", 36000);
};

module.exports = { addAccount, unlockAccount };
